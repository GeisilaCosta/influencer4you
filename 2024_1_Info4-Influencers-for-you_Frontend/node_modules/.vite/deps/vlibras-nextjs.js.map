{
  "version": 3,
  "sources": ["../../vlibras-nextjs/src/index.tsx"],
  "sourcesContent": ["import React, { EffectCallback, useEffect } from \"react\";\n\ntype ExpectedReadyState =\n  | ReadonlyArray<DocumentReadyState>\n  | DocumentReadyState\n  | undefined;\n\nconst isReadyStateMatch = (expected?: ExpectedReadyState): boolean => {\n  if (!expected) {\n    return true;\n  }\n  if (typeof expected === \"string\" && document.readyState === expected) {\n    return true;\n  }\n  return expected.indexOf(document.readyState) !== -1;\n};\n\ntype useReadyStateEffect = (\n  effect: EffectCallback,\n  deps?: any[],\n  onState?: ExpectedReadyState\n) => void;\n\nconst useReadyStateEffect: useReadyStateEffect = (\n  effect,\n  deps = [],\n  onState = \"complete\"\n): void => {\n  useEffect(() => {\n    const destructors: Array<() => void> = [\n      () => document.removeEventListener(\"readystatechange\", listener),\n    ];\n\n    const listener = () => {\n      if (!isReadyStateMatch(onState)) {\n        return;\n      }\n      const destructor = effect();\n      if (destructor) {\n        destructors.push(destructor);\n      }\n    };\n\n    listener();\n    document.addEventListener(\"readystatechange\", listener);\n\n    return () => destructors.forEach((d) => d());\n  }, deps);\n};\n\ntype Props = {\n  forceOnload?: boolean;\n};\n\nfunction VLibras({ forceOnload }: Props): JSX.Element {\n  useReadyStateEffect(\n    () => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://vlibras.gov.br/app/vlibras-plugin.js\";\n      script.async = true;\n      const widgetUrl = `https://vlibras.gov.br/app`;\n      script.onload = () => {\n        // @ts-ignore\n        new window.VLibras.Widget(widgetUrl);\n        if (forceOnload) {\n          // @ts-ignore\n          window.onload();\n        }\n      };\n      document.head.appendChild(script);\n    },\n    [forceOnload],\n    \"complete\"\n  );\n\n  return (\n    // @ts-ignore\n    <div vw=\"true\" className=\"enabled\">\n      <div vw-access-button=\"true\" className=\"active\" />\n      <div vw-plugin-wrapper=\"true\">\n        <div className=\"vw-plugin-top-wrapper\" />\n      </div>\n    </div>\n  );\n}\n\nexport default VLibras;\n"],
  "mappings": ";;;;;;;;AAAA,mBAAiD;AAOjD,IAAM,oBAAoB,CAAC,aAA0C;AACnE,MAAI,CAAC,UAAU;AACb,WAAO;;AAET,MAAI,OAAO,aAAa,YAAY,SAAS,eAAe,UAAU;AACpE,WAAO;;AAET,SAAO,SAAS,QAAQ,SAAS,UAAU,MAAM;AACnD;AAQA,IAAM,sBAA2C,CAC/C,QACA,OAAO,CAAA,GACP,UAAU,eACF;AACR,8BAAU,MAAK;AACb,UAAM,cAAiC;MACrC,MAAM,SAAS,oBAAoB,oBAAoB,QAAQ;;AAGjE,UAAM,WAAW,MAAK;AACpB,UAAI,CAAC,kBAAkB,OAAO,GAAG;AAC/B;;AAEF,YAAM,aAAa,OAAM;AACzB,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;;IAE/B;AAEA,aAAQ;AACR,aAAS,iBAAiB,oBAAoB,QAAQ;AAEtD,WAAO,MAAM,YAAY,QAAQ,CAAC,MAAM,EAAC,CAAE;EAC7C,GAAG,IAAI;AACT;AAMA,SAAS,QAAQ,EAAE,YAAW,GAAS;AACrC,sBACE,MAAK;AACH,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,MAAM;AACb,WAAO,QAAQ;AACf,UAAM,YAAY;AAClB,WAAO,SAAS,MAAK;AAEnB,UAAI,OAAO,QAAQ,OAAO,SAAS;AACnC,UAAI,aAAa;AAEf,eAAO,OAAM;;IAEjB;AACA,aAAS,KAAK,YAAY,MAAM;EAClC,GACA,CAAC,WAAW,GACZ,UAAU;AAGZ;;IAEE,aAAAA,QAAA;MAAA;MAAA,EAAK,IAAG,QAAO,WAAU,UAAS;MAChC,aAAAA,QAAA,cAAA,OAAA,EAAA,oBAAsB,QAAO,WAAU,SAAQ,CAAA;MAC/C,aAAAA,QAAA;QAAA;QAAA,EAAA,qBAAuB,OAAM;QAC3B,aAAAA,QAAA,cAAA,OAAA,EAAK,WAAU,wBAAuB,CAAA;MAAG;IACrC;;AAGZ;AAEA,IAAA,cAAe;",
  "names": ["React"]
}
